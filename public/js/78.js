"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[78],{78:(a,e,t)=>{t.r(e),t.d(e,{default:()=>o});const r={name:"AgregarMarcaModal",data:function(){return{loading:!1,dialog:!1,marca:{}}},methods:{agregarMarca:function(){var a=this;this.loading=!0,this.marca.id?this.$http.put("marcas/".concat(this.marca.id),this.marca).then((function(e){a.loading=!1,a.$emit("reload"),a.close()})).catch((function(e){alert(e.response.data.message),a.loading=!1})):this.$http.post("marcas",this.marca).then((function(e){a.loading=!1,a.$emit("reload"),a.close()})).catch((function(e){alert(e.response.data.message),a.loading=!1}))},close:function(){this.marca={},this.dialog=!1},open:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.marca=a,this.dialog=!0}}};var n=t(900);const c={name:"Marcas",components:{AgregarMarcaModal:(0,n.Z)(r,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("v-dialog",{attrs:{persistent:"","max-width":"960"},model:{value:a.dialog,callback:function(e){a.dialog=e},expression:"dialog"}},[t("v-form",[t("ValidatorObserver",{ref:"obs",staticStyle:{width:"100%"},scopedSlots:a._u([{key:"default",fn:function(e){var r=e.invalid;return[t("v-card",[t("v-card-title",{staticClass:"headline text-sm-left"},[a._v("\n                    "+a._s(a.marca&&a.marca.id?"Editar ":"Agregar")+" Marca\n                ")]),a._v(" "),t("v-card-text",[t("v-container",[t("v-row",[t("v-col",{attrs:{cols:"12",md:"6"}},[t("Validator",{attrs:{rules:"required",name:"Nombre",immediate:!0},scopedSlots:a._u([{key:"default",fn:function(e){var r=e.errors;return[t("v-text-field",{attrs:{label:"Nombre",name:"Nombre","error-messages":r},model:{value:a.marca.nombre,callback:function(e){a.$set(a.marca,"nombre",e)},expression:"marca.nombre"}})]}}],null,!0)})],1),a._v(" "),t("v-col",{attrs:{cols:"12",md:"6"}},[t("Validator",{attrs:{rules:"required",name:"Referencia",immediate:!0},scopedSlots:a._u([{key:"default",fn:function(e){var r=e.errors;return[t("v-text-field",{attrs:{label:"Referencia",name:"Referencia","error-messages":r},model:{value:a.marca.referencia,callback:function(e){a.$set(a.marca,"referencia",e)},expression:"marca.referencia"}})]}}],null,!0)})],1)],1)],1)],1),a._v(" "),t("v-card-actions",[t("v-spacer"),a._v(" "),t("v-btn",{attrs:{color:"red darken-1",loading:a.loading,text:""},on:{click:function(e){return a.close()}}},[a._v("\n                        Cancelar\n                    ")]),a._v(" "),t("v-btn",{attrs:{color:"green darken-1",loading:a.loading,disabled:a.loading||r,text:""},on:{click:a.agregarMarca}},[a._v("\n                        Agregar\n                    ")])],1)],1)]}}])})],1)],1)}),[],!1,null,"73e4411e",null).exports},data:function(){return{search:"",pageCount:0,pagination:{page:1,itemsPerPage:10,sortBy:[],sortDesc:[],groupBy:[],groupDesc:[],multiSort:!1,mustSort:!1},loading:!1,headers:[{text:"Nombre",value:"nombre",sortable:!1,width:"70%"},{text:"Referencia",value:"referencia"},{text:"Opciones",value:"opciones"}],marcas:[]}},methods:{getData:function(){var a=this;this.loading=!0;var e=this.search?this.search:"";this.$http.get("/marcas?filter[search]=".concat(e,"&per_page=").concat(this.pagination.itemsPerPage,"&page=").concat(this.pagination.page)).then((function(e){a.marcas=e.data.data,a.pageCount=e.data.total,a.loading=!1})).catch((function(e){alert(e.response.data.message),a.loading=!1}))},borrarMarca:function(a){var e=this;this.loading=!0;this.search&&this.search;this.$http.delete("/marcas/".concat(a)).then((function(a){e.getData(),e.loading=!1})).catch((function(a){alert(a.response.data.message),e.loading=!1}))},clearSearch:function(){this.search="",this.getData()}},mounted:function(){this.getData()}};const o=(0,n.Z)(c,(function(){var a=this,e=a.$createElement,t=a._self._c||e;return t("div",[t("v-layout",[t("h1",[a._v("Marcas")]),a._v(" "),t("v-spacer"),a._v(" "),t("v-btn",{staticClass:"mr-1",attrs:{color:"success"},on:{click:function(e){return a.$refs.agregarMarca.open()}}},[a._v("\n            Agregar\n            "),t("v-icon",{attrs:{right:"",dark:""}},[a._v("\n                mdi-plus\n            ")])],1),a._v(" "),t("v-btn",{staticClass:"mr-1",attrs:{color:"warning"},on:{click:a.getData}},[a._v("\n            Refrescar\n            "),t("v-icon",{attrs:{right:"",dark:""}},[a._v("\n                mdi-reload\n            ")])],1)],1),a._v(" "),t("v-data-table",{staticClass:"elevation-1",attrs:{headers:a.headers,items:a.marcas,options:a.pagination,loading:a.loading,"server-items-length":a.pageCount,"item-key":"nombre"},on:{"update:options":function(e){a.pagination=e},"update:page":a.getData,"update:items-per-page":a.getData},scopedSlots:a._u([{key:"top",fn:function(){return[t("v-text-field",{staticClass:"mx-4",attrs:{label:"Buscar...","single-line":"",clearable:""},on:{keyup:function(e){return!e.type.indexOf("key")&&a._k(e.keyCode,"enter",13,e.key,"Enter")?null:a.getData.apply(null,arguments)},"click:clear":a.clearSearch},model:{value:a.search,callback:function(e){a.search=e},expression:"search"}})]},proxy:!0},{key:"item.opciones",fn:function(e){var r=e.item;return[t("v-btn",{attrs:{fab:"",icon:""},on:{click:function(e){return a.$refs.agregarMarca.open(r)}}},[t("v-icon",{attrs:{color:"success"}},[a._v("mdi-pencil")])],1),t("v-btn",{attrs:{fab:"",icon:""},on:{click:function(e){return a.borrarMarca(r.id)}}},[t("v-icon",{attrs:{color:"red"}},[a._v("mdi-delete")])],1)]}}])}),a._v(" "),t("AgregarMarcaModal",{ref:"agregarMarca",on:{relaod:a.getData}})],1)}),[],!1,null,"5eb7219c",null).exports}}]);