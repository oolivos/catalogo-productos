"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[841],{841:(e,t,a)=>{a.r(t),a.d(t,{default:()=>c});const o={name:"AgregarProductoModal",data:function(){return{loading:!1,dialog:!1,producto:{},tipoTallas:["S","M","L"],date:null,menuPicker:null,marcas:[]}},methods:{agregarProducto:function(){var e=this;this.loading=!0,this.producto.id?this.$http.put("productos/".concat(this.producto.id),this.producto).then((function(t){e.loading=!1,e.$emit("reload"),e.close()})).catch((function(t){alert(t.response.data.message),e.loading=!1})):this.$http.post("productos",this.producto).then((function(t){e.loading=!1,e.$emit("reload"),e.close()})).catch((function(t){alert(t.response.data.message),e.loading=!1}))},close:function(){this.producto={},this.dialog=!1},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.producto=e,this.dialog=!0},complementos:function(){var e=this;this.$http.get("complementos/marcas").then((function(t){var a=t.data;e.marcas=a})).catch((function(e){alert(e.response.data.message)}))}},mounted:function(){this.complementos()}};var r=a(900);const n={name:"Productos",components:{AgregarProductoModal:(0,r.Z)(o,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-dialog",{attrs:{persistent:"","max-width":"960"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-form",[a("ValidatorObserver",{ref:"obs",staticStyle:{width:"100%"},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.invalid;return[a("v-card",[a("v-card-title",{staticClass:"headline text-sm-left"},[e._v("\n                    "+e._s(e.producto&&e.producto.id?"Editar ":"Agregar")+" Producto\n                ")]),e._v(" "),a("v-card-text",[a("v-container",[a("v-row",[a("v-col",{attrs:{cols:"12",md:"6"}},[a("Validator",{attrs:{rules:"required",name:"Nombre",immediate:!0},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("v-text-field",{attrs:{label:"Nombre",name:"Nombre","error-messages":o},model:{value:e.producto.nombre,callback:function(t){e.$set(e.producto,"nombre",t)},expression:"producto.nombre"}})]}}],null,!0)})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"6"}},[a("Validator",{attrs:{rules:"required",name:"Marca",immediate:!0},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("v-select",{attrs:{label:"Marca",name:"Marca",items:e.marcas,"item-text":"nombre","item-value":"id","error-messages":o},model:{value:e.producto.marca_id,callback:function(t){e.$set(e.producto,"marca_id",t)},expression:"producto.marca_id"}})]}}],null,!0)})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("Validator",{attrs:{rules:"required",name:"Talla",immediate:!0},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("v-select",{attrs:{label:"Talla",name:"Talla",items:e.tipoTallas,"error-messages":o},model:{value:e.producto.talla,callback:function(t){e.$set(e.producto,"talla",t)},expression:"producto.talla"}})]}}],null,!0)})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("Validator",{attrs:{rules:"required|numeric",name:"Cantidad",immediate:!0},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("v-text-field",{attrs:{label:"Cantidad",name:"Cantidad","error-messages":o},model:{value:e.producto.cantidad_inventario,callback:function(t){e.$set(e.producto,"cantidad_inventario",t)},expression:"producto.cantidad_inventario"}})]}}],null,!0)})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"4"}},[a("Validator",{attrs:{rules:"required",name:"Fecha Embarque",immediate:!0},scopedSlots:e._u([{key:"default",fn:function(t){var o=t.errors;return[a("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"auto"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on,n=t.attrs;return[a("v-text-field",e._g(e._b({attrs:{label:"Fecha Embarque","prepend-icon":"mdi-calendar",readonly:"",name:"Fecha Embarque","error-messages":o},model:{value:e.producto.fecha_embarque,callback:function(t){e.$set(e.producto,"fecha_embarque",t)},expression:"producto.fecha_embarque"}},"v-text-field",n,!1),r))]}}],null,!0),model:{value:e.menuPicker,callback:function(t){e.menuPicker=t},expression:"menuPicker"}},[e._v(" "),a("v-date-picker",{on:{input:function(t){e.menuPicker=!1}},model:{value:e.producto.fecha_embarque,callback:function(t){e.$set(e.producto,"fecha_embarque",t)},expression:"producto.fecha_embarque"}})],1)]}}],null,!0)})],1),e._v(" "),a("v-col",{attrs:{cols:"12",md:"12"}},[a("v-textarea",{attrs:{label:"Observaciones",name:"Observaciones"},model:{value:e.producto.observaciones,callback:function(t){e.$set(e.producto,"observaciones",t)},expression:"producto.observaciones"}})],1)],1)],1)],1),e._v(" "),a("v-card-actions",[a("v-spacer"),e._v(" "),a("v-btn",{attrs:{color:"red darken-1",loading:e.loading,text:""},on:{click:function(t){return e.close()}}},[e._v("\n                        Cancelar\n                    ")]),e._v(" "),a("v-btn",{attrs:{color:"green darken-1",loading:e.loading,disabled:e.loading||o,text:""},on:{click:e.agregarProducto}},[e._v("\n                        Agregar\n                    ")])],1)],1)]}}])})],1)],1)}),[],!1,null,"477146a1",null).exports},data:function(){return{search:"",pageCount:0,pagination:{page:1,itemsPerPage:10,sortBy:[],sortDesc:[],groupBy:[],groupDesc:[],multiSort:!1,mustSort:!1},loading:!1,headers:[{text:"Nombre",value:"nombre",sortable:!1},{text:"Talla",value:"talla"},{text:"Marca",value:"marca.nombre"},{text:"Cantidad",value:"cantidad_inventario"},{text:"F Embarque",value:"fecha_embarque"},{text:"Observaciones",value:"observaciones"},{text:"Opciones",value:"opciones"}],productos:[]}},methods:{getData:function(){var e=this;this.loading=!0;var t=this.search?this.search:"";this.$http.get("/productos?filter[search]=".concat(t,"&per_page=").concat(this.pagination.itemsPerPage,"&page=").concat(this.pagination.page)).then((function(t){e.productos=t.data.data,e.pageCount=t.data.total,e.loading=!1})).catch((function(t){alert(t.response.data.message),e.loading=!1}))},borrarProducto:function(e){var t=this;this.loading=!0;this.search&&this.search;this.$http.delete("/productos/".concat(e)).then((function(e){t.getData(),t.loading=!1})).catch((function(e){alert(e.response.data.message),t.loading=!1}))},clearSearch:function(){this.search="",this.getData()}},mounted:function(){this.getData()}};const c=(0,r.Z)(n,(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-layout",[a("h1",[e._v("Productos")]),e._v(" "),a("v-spacer"),e._v(" "),a("v-btn",{staticClass:"mr-1",attrs:{color:"success"},on:{click:function(t){return e.$refs.agregarProducto.open()}}},[e._v("\n            Agregar\n            "),a("v-icon",{attrs:{right:"",dark:""}},[e._v("\n                mdi-plus\n            ")])],1),e._v(" "),a("v-btn",{staticClass:"mr-1",attrs:{color:"warning"},on:{click:e.getData}},[e._v("\n            Refrescar\n            "),a("v-icon",{attrs:{right:"",dark:""}},[e._v("\n                mdi-reload\n            ")])],1)],1),e._v(" "),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.productos,options:e.pagination,loading:e.loading,"server-items-length":e.pageCount,"item-key":"nombre"},on:{"update:options":function(t){e.pagination=t},"update:page":e.getData,"update:items-per-page":e.getData},scopedSlots:e._u([{key:"item.opciones",fn:function(t){var o=t.item;return[a("v-btn",{attrs:{fab:"",icon:""},on:{click:function(t){return e.$refs.agregarProducto.open(o)}}},[a("v-icon",{attrs:{color:"success"}},[e._v("mdi-pencil")])],1),a("v-btn",{attrs:{fab:"",icon:""},on:{click:function(t){return e.borrarProducto(o.id)}}},[a("v-icon",{attrs:{color:"red"}},[e._v("mdi-delete")])],1)]}},{key:"top",fn:function(){return[a("v-text-field",{staticClass:"mx-4",attrs:{label:"Buscar...","single-line":"",clearable:""},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getData.apply(null,arguments)},"click:clear":e.clearSearch},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]},proxy:!0}])}),e._v(" "),a("AgregarProductoModal",{ref:"agregarProducto",on:{reload:e.getData}})],1)}),[],!1,null,"d43f0ea6",null).exports}}]);